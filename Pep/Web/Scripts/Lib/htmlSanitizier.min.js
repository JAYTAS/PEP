var htmlSanitizier={matcher:/<\/?([a-zA-Z0-9]+)*(.*?)\/?>/igm,whitelist:["a","b","p","em","strong"],analyze:function(n){var i,t,r,u,f;for(n=String(n)||"",i=[];(t=htmlSanitizier.matcher.exec(n))!=null;)r=t[2].split(" "),u=[],r.shift(),r.forEach(function(n){n=n.split("=");var i=n[0],t=n.length>1?n.slice(1).join("="):null;t&&t.charAt(0).match(/'|"/)&&(t=t.slice(1));t&&t.charAt(t.length-1).match(/'|"/)&&(t=t.slice(0,-1));n={name:i,value:t};n.value||delete n.value;n.name&&u.push(n)}),f={full:t[0],name:t[1],attr:u},i.push(f);return i},sanitize:function(n,t){n=String(n)||"";t=t||{};var i=t.mode||"white",r=t.list||htmlSanitizier.whitelist,u=htmlSanitizier.analyze(n);return(i=="white"&&r.indexOf("script")==-1||i=="black"&&r.indexOf("script")!=-1)&&(n=n.replace(/<script(.*?)>(.*?[\r\n])*?(.*?)(.*?[\r\n])*?<\/script>/gim,"")),(i=="white"&&r.indexOf("style")==-1||i=="black"&&r.indexOf("style")!=-1)&&(n=n.replace(/<style(.*?)>(.*?[\r\n])*?(.*?)(.*?[\r\n])*?<\/style>/gim,"")),u.forEach(function(t){if(i=="white")r.indexOf(t.name)==-1&&(n=n.replace(t.full,""));else if(i=="black")r.indexOf(t.name)!=-1&&(n=n.replace(t.full,""));else throw new Error('Unknown sanitization mode "'+i+'"');}),n}};